(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,s){},16:function(e,t,s){"use strict";s.r(t);var n=s(1),i=s.n(n),c=s(9),a=s.n(c),r=(s(14),s(2)),l=s(3),o=s(4),u=s(7),d=s(5),h=s(6),j=s(0);var m=function(e){var t={color:e.colorFigure,background:e.colorBoard};return Object(j.jsx)("button",{className:e.value?"square square--fill":"square",style:t,onClick:e.onClick,children:e.value})};function b(e){return JSON.parse(localStorage.getItem(e))}function g(e,t){localStorage.setItem(e,JSON.stringify(t))}var p=s.p+"static/media/step.4eab55ed.mp3",O=s.p+"static/media/error.c15ebdb6.mp3",x={pvp:{X:0,O:0,draw:0},pvspc:{X:0,O:0,draw:0},pcvpc:{X:0,O:0,draw:0}},v=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],f=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).state=e.save||{squares:Array(9).fill(null),xIsNext:!0,mode:"pvp"},n.disableBoard=!1,n.audioStep=new Audio(p),n.audioError=new Audio(O),n.audioStep.volume=n.props.settings.volumeSound,n.audioError.volume=n.props.settings.volumeSound,n.timeForStep=+n.props.settings.timeForStep,n}return Object(o.a)(s,[{key:"calculateWinner",value:function(e){for(var t=v.slice(),s=0;s<t.length;s++){var n=Object(h.a)(t[s],3),i=n[0],c=n[1],a=n[2];if(e[i]&&e[i]===e[c]&&e[i]===e[a])return e[i]}return e.some((function(e){return null===e}))?null:"draw"}},{key:"handleClickPVP",value:function(e){var t=this.state.squares.slice();this.calculateWinner(t)||t[e]?this.playAudio("error"):(t[e]=this.state.xIsNext?"X":"O",this.playAudio("step"),this.setState({squares:t,xIsNext:!this.state.xIsNext}))}},{key:"playAudio",value:function(e){this.props.settings.sound&&("step"===e?(this.audioStep.currentTime=0,this.audioStep.play()):(this.audioError.currentTime=0,this.audioError.play()))}},{key:"handleClickPVSPC",value:function(e){var t=this.state.squares.slice();this.calculateWinner(t)||t[e]||this.disableBoard?this.playAudio("error"):(t[e]="X",this.disableBoard=!0,this.playAudio("step"),this.setState({squares:t,xIsNext:!this.state.xIsNext}))}},{key:"renderSquare",value:function(e){var t=this;return Object(j.jsx)(m,{value:this.state.squares[e],onClick:function(){"pvp"===t.state.mode?t.handleClickPVP(e):"pvspc"===t.state.mode?t.handleClickPVSPC(e):t.playAudio("error")},colorFigure:this.props.settings.colorFigure,colorBoard:this.props.settings.colorBoard})}},{key:"changeMode",value:function(e){this.disableBoard=!1,this.autoWinner=null,this.winner=null,this.setState({squares:Array(9).fill(null),mode:e,xIsNext:!0})}},{key:"resetGame",value:function(){this.disableBoard=!1,this.autoWinner=null,this.winner=null,this.setState({squares:Array(9).fill(null),xIsNext:!0})}},{key:"saveGame",value:function(){g("saveGame",this.state)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.xIsNext||this.calculateWinner(this.state.squares)||"pvspc"!==this.state.mode||this.computerStep(),this.calculateWinner(this.state.squares)||"pcvpc"!==this.state.mode||(this.disableBoard=!0,this.computerStep()),clearTimeout(this.timer),isNaN(this.timeForStep)||this.winner||(this.timer=setTimeout((function(){e.autoWinner=e.state.xIsNext?"O":"X",e.forceUpdate()}),+this.props.settings.timeForStep))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),clearTimeout(this.stepPC)}},{key:"computerStep",value:function(){var e,t=this,s=[],n=this.state.squares.slice(),i=v.slice(),c=this.findWinPosition(i,"X"),a=this.findWinPosition(i,"O");null!==a?e=a:null!==c?e=c:(n.forEach((function(e,t){e||s.push(t)})),e=s[Math.floor(Math.random()*s.length)]),this.stepPC=setTimeout((function(){n[e]=t.state.xIsNext?"X":"O",t.playAudio("step"),t.setState({squares:n,xIsNext:!t.state.xIsNext}),t.disableBoard=!1}),1e3)}},{key:"findWinPosition",value:function(e,t){for(var s=this,n=0;n<e.length;n++)if(2===e[n].reduce((function(e,n){return s.state.squares[n]===t?e+1:e}),0))for(var i=0;i<e[n].length;i++)if(null===this.state.squares[e[n][i]])return e[n][i];return null}},{key:"changeStatistics",value:function(e,t){var s=b("statisticsGame")||x;s[e][t]+=1,g("statisticsGame",s)}},{key:"render",value:function(){var e,t=this;return this.winner=this.autoWinner||this.calculateWinner(this.state.squares),this.winner?(e="draw"===this.winner?"Draw":"".concat(this.winner," Wins"),this.changeStatistics(this.state.mode,this.winner)):e="Next player: ".concat(this.state.xIsNext?"X":"O"),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"choose-mode",children:[Object(j.jsxs)("label",{className:"choose-mode-item",children:[Object(j.jsx)("input",{type:"radio",name:"mode",value:"pvp",defaultChecked:"pvp"===this.state.mode,onChange:function(e){return t.changeMode(e.target.value)}}),"Player VS Player"]}),Object(j.jsxs)("label",{className:"choose-mode-item",children:[Object(j.jsx)("input",{type:"radio",name:"mode",value:"pvspc",defaultChecked:"pvspc"===this.state.mode,onChange:function(e){return t.changeMode(e.target.value)}}),"Player VS PC"]}),Object(j.jsxs)("label",{className:"choose-mode-item",children:[Object(j.jsx)("input",{type:"radio",name:"mode",value:"pcvpc",defaultChecked:"pcvpc"===this.state.mode,onChange:function(e){return t.changeMode(e.target.value)}}),"PC VS PC"]})]}),Object(j.jsx)("div",{className:"status",children:e}),Object(j.jsxs)("div",{className:"pcvpc"===this.state.mode?"board-wrap board-wrap--disable":"board-wrap",children:[Object(j.jsxs)("div",{className:"board-row",children:[this.renderSquare(0),this.renderSquare(1),this.renderSquare(2)]}),Object(j.jsxs)("div",{className:"board-row",children:[this.renderSquare(3),this.renderSquare(4),this.renderSquare(5)]}),Object(j.jsxs)("div",{className:"board-row",children:[this.renderSquare(6),this.renderSquare(7),this.renderSquare(8)]}),Object(j.jsxs)("div",{className:this.winner?"board-result board-result--visible":"board-result",children:[e,Object(j.jsx)("button",{className:"board-result-btn",onClick:function(){return t.resetGame()},children:"New Game"})]})]}),Object(j.jsxs)("div",{className:"buttons-block",children:[Object(j.jsx)("button",{className:"button",onClick:function(){return t.props.changeLink("menu")},children:"Menu"}),Object(j.jsx)("button",{className:"button",onClick:function(){return t.saveGame()},children:"Save Game"}),Object(j.jsx)("button",{className:"button",onClick:function(){return t.resetGame()},children:"Reset"})]})]})}}]),s}(i.a.Component);var k=function(e){return Object(j.jsxs)("ul",{className:"menu",children:[Object(j.jsx)("li",{className:"menu-item",onClick:function(){return e.changeLink("newGame")},children:"New Game"}),Object(j.jsx)("li",{className:b("saveGame")?"menu-item":"menu-item menu-item--disabled",onClick:function(){return e.changeLink("continue")},children:"Continue"}),Object(j.jsx)("li",{className:"menu-item",onClick:function(){return e.changeLink("settings")},children:"Settings"}),Object(j.jsx)("li",{className:"menu-item",onClick:function(){return e.changeLink("statistics")},children:"Statistics"}),Object(j.jsx)("li",{className:"menu-item",onClick:function(){return e.changeLink("shortcutKeys")},children:"Shortcut keys"})]})};var S=function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"setting-title",children:"Settings"}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{className:"setting-item",children:[Object(j.jsx)("span",{className:"setting-item-title",children:"Sound:"}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("label",{children:["On",Object(j.jsx)("input",{type:"radio",value:"on",name:"sound",onChange:e.toggleSound,defaultChecked:!!e.settings.sound})]}),Object(j.jsxs)("label",{children:["Off",Object(j.jsx)("input",{type:"radio",value:"off",name:"sound",onChange:e.toggleSound,defaultChecked:!e.settings.sound})]})]})]}),Object(j.jsxs)("li",{className:"setting-item",children:[Object(j.jsx)("span",{className:"setting-item-title",children:"Music:"}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("label",{children:["On",Object(j.jsx)("input",{type:"radio",value:"on",name:"music",onChange:e.toggleMusic,defaultChecked:!!e.settings.music})]}),Object(j.jsxs)("label",{children:["Off",Object(j.jsx)("input",{type:"radio",value:"off",name:"music",onChange:e.toggleMusic,defaultChecked:!e.settings.music})]})]})]}),Object(j.jsxs)("li",{className:"setting-item",children:[Object(j.jsx)("span",{className:"setting-item-title",children:"Color figures:"}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"color",onChange:function(t){return e.toggleColorFigure(t.target.value)},defaultValue:e.settings.colorFigure})})]}),Object(j.jsxs)("li",{className:"setting-item",children:[Object(j.jsx)("span",{className:"setting-item-title",children:"Color board:"}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"color",onChange:function(t){return e.toggleColorBoard(t.target.value)},defaultValue:e.settings.colorBoard})})]}),Object(j.jsxs)("li",{className:"setting-item",children:[Object(j.jsx)("span",{className:"setting-item-title",children:"Volume Sound:"}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",onChange:function(t){return e.toggleVolumeSound(t.target.value)},defaultValue:e.settings.volumeSound})})]}),Object(j.jsxs)("li",{className:"setting-item",children:[Object(j.jsx)("span",{className:"setting-item-title",children:"Volume Music:"}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",onChange:function(t){return e.toggleVolumeMusic(t.target.value)},defaultValue:e.settings.volumeMusic})})]}),Object(j.jsxs)("li",{className:"setting-item",children:[Object(j.jsx)("span",{className:"setting-item-title",children:"Time for step:"}),Object(j.jsx)("div",{children:Object(j.jsxs)("select",{value:e.settings.timeForStep,onChange:function(t){return e.toggleTimeForStep(t.target.value)},children:[Object(j.jsx)("option",{value:"2000",children:"2 seconds"}),Object(j.jsx)("option",{value:"5000",children:"5 seconds"}),Object(j.jsx)("option",{value:"10000",children:"10 seconds"}),Object(j.jsx)("option",{value:"infinity",children:"infinity"})]})})]})]}),Object(j.jsx)("button",{onClick:function(){return e.changeLink("menu")},children:"Menu"})]})};var N=function(e){return Object(j.jsxs)("div",{className:"button-keyboard",children:[Object(j.jsx)("span",{className:"mark-keyboard",children:e.mark}),Object(j.jsx)("span",{className:"value-keyboard",children:e.value})]})};var y=function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Shortcut Keys"}),Object(j.jsxs)("ul",{className:"shortcut-list",children:[Object(j.jsxs)("li",{className:"shortcut-item",children:[Object(j.jsx)("span",{children:"New Game"}),Object(j.jsx)(N,{mark:"!",value:"1"})]}),Object(j.jsxs)("li",{className:"shortcut-item",children:[Object(j.jsx)("span",{children:"Continue"}),Object(j.jsx)(N,{mark:"@",value:"2"})]}),Object(j.jsxs)("li",{className:"shortcut-item",children:[Object(j.jsx)("span",{children:"Settings"}),Object(j.jsx)(N,{mark:"#",value:"3"})]}),Object(j.jsxs)("li",{className:"shortcut-item",children:[Object(j.jsx)("span",{children:"Statistics"}),Object(j.jsx)(N,{mark:"$",value:"4"})]}),Object(j.jsxs)("li",{className:"shortcut-item",children:[Object(j.jsx)("span",{children:"Shortcut keys"}),Object(j.jsx)(N,{mark:"%",value:"5"})]}),Object(j.jsxs)("li",{className:"shortcut-item",children:[Object(j.jsx)("span",{children:"Menu"}),Object(j.jsx)(N,{mark:"",value:"Backspace"})]})]}),Object(j.jsx)("button",{onClick:function(){return e.changeLink("menu")},children:"Menu"})]})};var C=function(e){var t=b("statisticsGame")||x,s=Object(n.useState)(t),i=Object(h.a)(s,2)[1];return Object(j.jsxs)("div",{children:[Object(j.jsxs)("table",{children:[Object(j.jsx)("caption",{children:Object(j.jsx)("h2",{children:"Statistics"})}),Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Mode / Figure"}),Object(j.jsx)("th",{children:"Player VS Player"}),Object(j.jsx)("th",{children:"Player(X) VS PC(O)"}),Object(j.jsx)("th",{children:"PC VS PC"})]})}),Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"X"}),Object(j.jsx)("td",{children:t.pvp.X}),Object(j.jsx)("td",{children:t.pvspc.X}),Object(j.jsx)("td",{children:t.pcvpc.X})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"O"}),Object(j.jsx)("td",{children:t.pvp.O}),Object(j.jsx)("td",{children:t.pvspc.O}),Object(j.jsx)("td",{children:t.pcvpc.O})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Draw"}),Object(j.jsx)("td",{children:t.pvp.draw}),Object(j.jsx)("td",{children:t.pvspc.draw}),Object(j.jsx)("td",{children:t.pcvpc.draw})]})]})]}),Object(j.jsxs)("div",{className:"buttons-block",children:[Object(j.jsx)("button",{onClick:function(){return e.changeLink("menu")},children:"Menu"}),Object(j.jsx)("button",{onClick:function(){return g("statisticsGame",x),void i(x)},children:"Reset statistics"})]})]})},w=s.p+"static/media/music.93142ad8.mp3",L=s.p+"static/media/rss.ad178c0d.svg",q=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).changeLink=function(e){n.setState({link:e})},n.toggleSound=function(){n.setState((function(e){return{settings:Object(r.a)(Object(r.a)({},e.settings),{},{sound:!e.settings.sound})}}))},n.toggleMusic=function(){n.setState((function(e){return{settings:Object(r.a)(Object(r.a)({},e.settings),{},{music:!e.settings.music})}}))},n.toggleColorFigure=function(e){n.setState((function(t){return{settings:Object(r.a)(Object(r.a)({},t.settings),{},{colorFigure:e})}}))},n.toggleColorBoard=function(e){n.setState((function(t){return{settings:Object(r.a)(Object(r.a)({},t.settings),{},{colorBoard:e})}}))},n.toggleVolumeSound=function(e){n.setState((function(t){return{settings:Object(r.a)(Object(r.a)({},t.settings),{},{volumeSound:e})}}))},n.toggleVolumeMusic=function(e){n.setState((function(t){return{settings:Object(r.a)(Object(r.a)({},t.settings),{},{volumeMusic:e})}}))},n.toggleTimeForStep=function(e){n.setState((function(t){return{settings:Object(r.a)(Object(r.a)({},t.settings),{},{timeForStep:e})}}))},n.state={link:"menu",continue:!1,settings:b("settingsGame")||{sound:!0,music:!1,colorFigure:"#000000",colorBoard:"#ffffff",volumeSound:1,volumeMusic:1,timeForStep:"infinity"}},n.audio=new Audio(w),n.init(),n}return Object(o.a)(s,[{key:"init",value:function(){var e=this;this.audio.addEventListener("ended",(function(){e.audio.play()})),document.addEventListener("keyup",(function(t){switch(t.key){case"Backspace":e.changeLink("menu");break;case"1":e.changeLink("newGame");break;case"2":e.state.continue&&e.changeLink("continue");break;case"3":e.changeLink("settings");break;case"4":e.changeLink("statistics");break;case"5":e.changeLink("shortcutKeys")}}))}},{key:"componentDidUpdate",value:function(){this.audio.volume=this.state.settings.volumeMusic,this.state.settings.music?this.audio.play():this.audio.pause(),g("settingsGame",this.state.settings)}},{key:"renderSwitch",value:function(e){switch(e){case"newGame":return Object(j.jsx)(f,{changeLink:this.changeLink,settings:this.state.settings});case"continue":return Object(j.jsx)(f,{changeLink:this.changeLink,save:b("saveGame"),settings:this.state.settings});case"settings":return Object(j.jsx)(S,{changeLink:this.changeLink,settings:this.state.settings,toggleSound:this.toggleSound,toggleMusic:this.toggleMusic,toggleColorFigure:this.toggleColorFigure,toggleColorBoard:this.toggleColorBoard,toggleVolumeSound:this.toggleVolumeSound,toggleVolumeMusic:this.toggleVolumeMusic,toggleTimeForStep:this.toggleTimeForStep});case"menu":return Object(j.jsx)(k,{changeLink:this.changeLink});case"statistics":return Object(j.jsx)(C,{changeLink:this.changeLink});case"shortcutKeys":return Object(j.jsx)(y,{changeLink:this.changeLink});default:return null}}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"game",children:[Object(j.jsx)("div",{className:"game-board",children:this.renderSwitch(this.state.link)}),Object(j.jsxs)("footer",{children:[Object(j.jsxs)("p",{children:["Created by ",Object(j.jsx)("a",{href:"https://github.com/antoniosk10",children:"Anton Skorobogaty"})," / 03.03.2021"]}),Object(j.jsx)("a",{href:"https://rs.school/react/",className:"logo",children:Object(j.jsx)("img",{src:L,alt:"rss"})})]})]})}}]),s}(i.a.Component);var M=function(){return Object(j.jsx)(q,{})},P=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,17)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,a=t.getTTFB;s(e),n(e),i(e),c(e),a(e)}))};a.a.render(Object(j.jsx)(M,{}),document.getElementById("root")),P()}},[[16,1,2]]]);
//# sourceMappingURL=main.3e71b0d8.chunk.js.map